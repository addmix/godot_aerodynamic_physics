[gd_scene load_steps=40 format=4 uid="uid://b2gqtyy75tb5a"]

[ext_resource type="Shader" uid="uid://chdh08i2dbrj2" path="res://addons/godot_aerodynamic_physics/utils/vector_3d/vector_3d.gdshader" id="1_dk61a"]
[ext_resource type="Script" uid="uid://dmckuukxkhgwa" path="res://addons/godot_aerodynamic_physics/utils/vector_3d/vector_3d.gd" id="2_hj20f"]
[ext_resource type="Script" uid="uid://cc5dwx5pqkaur" path="res://addons/godot_aerodynamic_physics/components/AeroControlComponent.gd" id="2_x2dhw"]
[ext_resource type="Script" uid="uid://d1725od371u4a" path="res://addons/godot_aerodynamic_physics/core/aero_influencer_3d/aero_surface_3d/manual_aero_surface_3d/manual_aero_surface_3d.gd" id="2_ygpq6"]
[ext_resource type="Script" uid="uid://b4xqlunpiyivk" path="res://addons/godot_aerodynamic_physics/utils/pid.gd" id="3_hyo05"]
[ext_resource type="Script" uid="uid://cdp8dc63ytxx1" path="res://addons/godot_aerodynamic_physics/core/flight_assist.gd" id="4_a0mgf"]
[ext_resource type="Script" path="res://addons/godot_aerodynamic_physics/core/control_configs/aero_control_config_axis.gd" id="5_hj20f"]
[ext_resource type="Script" path="res://addons/godot_aerodynamic_physics/core/control_configs/aero_control_config.gd" id="5_x51t6"]
[ext_resource type="Script" uid="uid://ctbwb7xlhft6t" path="res://addons/godot_aerodynamic_physics/core/aero_influencer_3d/aero_surface_3d/manual_aero_surface_3d/manual_aero_surface_config.gd" id="9_u1r4g"]
[ext_resource type="Script" uid="uid://crkbhmxpjff4o" path="res://addons/godot_aerodynamic_physics/core/aero_influencer_3d/aero_surface_3d/aero_surface_config.gd" id="10_dk61a"]
[ext_resource type="PackedScene" uid="uid://bddf1hhmmre47" path="res://addons/godot_aerodynamic_physics/demo/flight_info_label.tscn" id="13_m134i"]

[sub_resource type="ShaderMaterial" id="ShaderMaterial_dk61a"]
render_priority = 100
shader = ExtResource("1_dk61a")
shader_parameter/_length = 0.0
shader_parameter/_width = 0.1
shader_parameter/_color = Vector3(0, 0, 0)
shader_parameter/checker_pattern = false

[sub_resource type="ArrayMesh" id="ArrayMesh_hj20f"]
_surfaces = [{
"aabb": AABB(-1, -1, -1, 2, 2, 2),
"format": 34359738375,
"material": SubResource("ShaderMaterial_dk61a"),
"primitive": 3,
"uv_scale": Vector4(0, 0, 0, 0),
"vertex_count": 24,
"vertex_data": PackedByteArray("AAAAAAAAgL8AAAAAAACAPwAAAAAAAAAAAAAAAAAAAAAAAIC/AAAAAAAAgL8AAAAAAAAAAAAAAAAAAIA/AACAPwAAAAAAAAAAAAAAAAAAgL8AAAAAAACAvwAAAAAAAAAAAAAAAAAAAAAAAIA/AAAAAAAAgL8AAAAAAAAAAAAAAAAAAIC/AACAvwAAAAAAAAAAAAAAAAAAgD8AAAAAAAAAAAAAAAAAAIC/AACAPwAAAAAAAAAAAAAAAAAAgD8AAAAAAACAPwAAAAAAAAAAAAAAAAAAAAAAAIA/AAAAAAAAgD8AAAAAAAAAAAAAAAAAAIA/AACAvwAAAAAAAAAAAAAAAAAAgD8AAAAAAACAvwAAAAAAAAAAAAAAAAAAAAAAAIC//38AAAAA/7////9//3//v///////fwCA/38AAAAA/7//f/9//38AgP///3//f/+//38AAAAA/78AAP9//3//v/9//3//fwCA/38AAAAA/7///////38AgAAA/3//f/+//3///wAA/7///////38AgP///3//f/+//3///wAA/7////9//3//v/9//3//fwCA/3///wAA/7//f/9//38AgAAA/3//f/+//3///wAA/78AAP9//3//v///////fwCA")
}]

[sub_resource type="Resource" id="Resource_6l1yh"]
script = ExtResource("3_hyo05")
p = 0.001
i = 0.0
d = 0.01
clamp_integral = false
min_integral = -1.0
max_integral = 1.0

[sub_resource type="Resource" id="Resource_rsy8r"]
script = ExtResource("3_hyo05")
p = 1.0
i = 0.05
d = 0.1
clamp_integral = false
min_integral = -1.0
max_integral = 1.0

[sub_resource type="Resource" id="Resource_6l2fv"]
script = ExtResource("3_hyo05")
p = 10.0
i = 0.3
d = 4.0
clamp_integral = false
min_integral = -1.0
max_integral = 1.0

[sub_resource type="Resource" id="Resource_wyxpf"]
script = ExtResource("3_hyo05")
p = 0.8
i = 0.0
d = 0.0
clamp_integral = false
min_integral = -1.0
max_integral = 1.0

[sub_resource type="Resource" id="Resource_wruso"]
script = ExtResource("3_hyo05")
p = 25.0
i = 0.0
d = 0.0
clamp_integral = false
min_integral = -1.0
max_integral = 1.0

[sub_resource type="Resource" id="Resource_x3iit"]
script = ExtResource("3_hyo05")
p = 10.0
i = 0.0
d = 0.0
clamp_integral = false
min_integral = -1.0
max_integral = 1.0

[sub_resource type="Resource" id="Resource_n4pj1"]
script = ExtResource("3_hyo05")
p = 10.0
i = 0.0
d = 0.0
clamp_integral = false
min_integral = -1.0
max_integral = 1.0

[sub_resource type="Resource" id="Resource_piqeh"]
script = ExtResource("3_hyo05")
p = 0.5
i = 5.0
d = 0.0
clamp_integral = true
min_integral = -0.1
max_integral = 0.1

[sub_resource type="Resource" id="Resource_t6xgy"]
script = ExtResource("3_hyo05")
p = 0.2
i = 0.0
d = 0.0
clamp_integral = false
min_integral = -1.0
max_integral = 1.0

[sub_resource type="Resource" id="Resource_1qfso"]
script = ExtResource("3_hyo05")
p = 0.0
i = 0.4
d = 0.0
clamp_integral = false
min_integral = -1.0
max_integral = 1.0

[sub_resource type="Resource" id="Resource_bvmql"]
script = ExtResource("3_hyo05")
p = 1.0
i = 0.0
d = 0.0
clamp_integral = false
min_integral = -1.0
max_integral = 1.0

[sub_resource type="Resource" id="Resource_qpum4"]
script = ExtResource("4_a0mgf")
enable_flight_assist = true
max_angular_rates = Vector3(2, 1, 5)
enable_flight_assist_x = true
pitch_assist_pid = SubResource("Resource_piqeh")
enable_flight_assist_y = true
yaw_assist_pid = SubResource("Resource_bvmql")
enable_flight_assist_z = true
roll_assist_pid = SubResource("Resource_t6xgy")
enable_g_limiter = true
g_limit = 9.0
negative_g_limit = 3.0
enable_aoa_limiter = true
aoa_limit_start = 22.0
aoa_limit_end = 25.0
enable_control_adjustment = false
tuned_airspeed = 100.0
min_accounted_airspeed = 75.0
tuned_density = 1.222
min_accounted_air_density = 0.1
enable_bank_angle_assist = false
bank_angle_target = 0.0
bank_angle_pid = SubResource("Resource_rsy8r")
enable_heading_hold = false
heading_target = 0.0
heading_pid = SubResource("Resource_x3iit")
enable_inclination_hold = false
inclination_target = 0.0
inclination_pid = SubResource("Resource_n4pj1")
enable_speed_hold = false
speed_target = 0.0
speed_pid = SubResource("Resource_1qfso")
enable_altitude_hold = false
altitude_target = 0.0
altitude_pid = SubResource("Resource_6l1yh")
enable_target_direction = false
direction_target = Vector3(0, 0, 0)
direction_pitch_pid = SubResource("Resource_6l2fv")
direction_yaw_pid = SubResource("Resource_wruso")
direction_roll_pid = SubResource("Resource_wyxpf")

[sub_resource type="Resource" id="Resource_34386"]
resource_name = "pitch"
script = ExtResource("5_hj20f")
axis_name = "pitch"
use_bindings = true
input = 0.0
min_limit = -1.0
max_limit = 1.0
positive_event = &"PitchUp"
negative_event = &"PitchDown"
enable_smoothing = false
smoothing_rate = 1.0
cumulative_positive_event = &""
cumulative_negative_event = &""
cumulative_rate = 1.0
easing = 1.0

[sub_resource type="Resource" id="Resource_o6rpv"]
resource_name = "yaw"
script = ExtResource("5_hj20f")
axis_name = "yaw"
use_bindings = true
input = 0.0
min_limit = -1.0
max_limit = 1.0
positive_event = &"YawLeft"
negative_event = &"YawRight"
enable_smoothing = false
smoothing_rate = 1.0
cumulative_positive_event = &""
cumulative_negative_event = &""
cumulative_rate = 1.0
easing = 1.0

[sub_resource type="Resource" id="Resource_wtjbh"]
resource_name = "roll"
script = ExtResource("5_hj20f")
axis_name = "roll"
use_bindings = true
input = 0.0
min_limit = -1.0
max_limit = 1.0
positive_event = &"RollLeft"
negative_event = &"RollRight"
enable_smoothing = false
smoothing_rate = 1.0
cumulative_positive_event = &""
cumulative_negative_event = &""
cumulative_rate = 1.0
easing = 1.0

[sub_resource type="Resource" id="Resource_jsx6i"]
resource_name = "throttle"
script = ExtResource("5_hj20f")
axis_name = "throttle"
use_bindings = true
input = 0.0
min_limit = 0.0
max_limit = 1.0
positive_event = &""
negative_event = &""
enable_smoothing = false
smoothing_rate = 1.0
cumulative_positive_event = &"ThrottleUp"
cumulative_negative_event = &"ThrottleDown"
cumulative_rate = 1.0
easing = 1.0

[sub_resource type="Resource" id="Resource_qs0nt"]
script = ExtResource("5_x51t6")
axis_configs = Array[ExtResource("5_hj20f")]([SubResource("Resource_34386"), SubResource("Resource_o6rpv"), SubResource("Resource_wtjbh"), SubResource("Resource_jsx6i")])

[sub_resource type="BoxShape3D" id="BoxShape3D_nchkm"]
size = Vector3(7.3728, 0.215118, 4.76475)

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_6onr1"]
radius = 0.446985

[sub_resource type="Curve" id="Curve_hj20f"]
_limits = [0.0, 1.0, -180.0, 180.0]
bake_resolution = 21
_data = [Vector2(-180, 0), 0.0, 0.0, 0, 0, Vector2(-90, 1), 0.0, 0.0, 0, 0, Vector2(0, 0), 0.0, 0.0, 0, 0, Vector2(90, 1), 0.0, 0.0, 0, 0, Vector2(180, 0), 0.0, 0.0, 0, 0]
point_count = 5

[sub_resource type="Curve" id="Curve_qs0nt"]
_limits = [1.0, 2.0, 0.0, 2.0]
bake_resolution = 23
_data = [Vector2(0.7, 1), 0.0, 0.0, 0, 0, Vector2(1, 2), 0.0, 0.0, 0, 0, Vector2(2, 1.2), 0.181, 0.0, 0, 0]
point_count = 3

[sub_resource type="Curve" id="Curve_m134i"]
_limits = [-1.0, 1.0, -180.0, 180.0]
bake_resolution = 36
_data = [Vector2(-180, 0), 0.0, 0.0, 0, 0, Vector2(-148, 1), 0.0, 0.0, 0, 0, Vector2(-145, 0.7), 0.0, 0.0, 0, 0, Vector2(-35, -0.7), 0.0, 0.0, 0, 0, Vector2(-32, -1), 0.0, 0.0, 0, 0, Vector2(32, 1), 0.0, 0.0, 0, 0, Vector2(35, 0.7), 0.0, 0.0, 0, 0, Vector2(137.426, -0.7), 0.0, 0.0, 0, 0, Vector2(148, -1), 0.0, 0.0, 0, 0, Vector2(180, 0), 0.0, 0.0, 0, 0]
point_count = 10

[sub_resource type="Curve" id="Curve_rvvp2"]
_limits = [0.0, 1.0, 0.0, 90.0]
bake_resolution = 4
_data = [Vector2(0, 1), 0.0, -0.0244575, 0, 0, Vector2(35.2174, 0.443437), -0.00834336, -0.00834336, 0, 0, Vector2(90, 0.291), 0.0, 0.0, 0, 0]
point_count = 3

[sub_resource type="Resource" id="Resource_blosn"]
script = ExtResource("9_u1r4g")
min_lift_coefficient = -1.6
max_lift_coefficient = 1.6
lift_aoa_curve = SubResource("Curve_m134i")
min_drag_coefficient = 0.02
max_drag_coefficient = 0.8
drag_aoa_curve = SubResource("Curve_hj20f")
sweep_drag_multiplier_curve = SubResource("Curve_rvvp2")
drag_at_mach_multiplier_curve = SubResource("Curve_qs0nt")

[sub_resource type="Resource" id="Resource_m2vdb"]
script = ExtResource("10_dk61a")
chord = 1.11
span = 3.64
auto_aspect_ratio = true
aspect_ratio = 3.27928

[sub_resource type="Resource" id="Resource_gk5sg"]
script = ExtResource("10_dk61a")
chord = 1.0
span = 2.0
auto_aspect_ratio = true
aspect_ratio = 2.0
metadata/_custom_type_script = "uid://crkbhmxpjff4o"

[node name="AeroBody3D" type="AeroBody3D"]
mass = 850.0

[node name="MeshInstance3D3" type="MeshInstance3D" parent="."]
custom_aabb = AABB(0, 0, 0, 100, 100, 100)
mesh = SubResource("ArrayMesh_hj20f")
script = ExtResource("2_hj20f")
color = Color(0, 0.5, 0.5, 1)

[node name="AeroControlComponent" type="Node" parent="."]
script = ExtResource("2_x2dhw")
flight_assist = SubResource("Resource_qpum4")
control_config = SubResource("Resource_qs0nt")

[node name="CollisionShape3D" type="CollisionShape3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.00468441, 1.16813)
shape = SubResource("BoxShape3D_nchkm")

[node name="CollisionShape3D2" type="CollisionShape3D" parent="."]
transform = Transform3D(-4.37114e-08, -1, 0, 1, -4.37114e-08, 0, 0, 0, 1, 0, -0.434142, -0.220745)
shape = SubResource("CapsuleShape3D_6onr1")

[node name="Camera3D" type="Camera3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.55771, 8.71651)
current = true
far = 100000.0

[node name="Label3D" type="Label3D" parent="Camera3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -2.11, 1.57529, -2.9862)
text = "Controls:
Pitch: W/A
Yaw: Q/E
Roll: A/D
Throttle: Shift/Ctrl"

[node name="FlightInfoLabel" parent="Camera3D" instance=ExtResource("13_m134i")]

[node name="CSGBox3D" type="CSGBox3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 0.998193, 0.0600904, 0, -0.0600904, 0.998193, 0, -0.155863, 1.06391)
size = Vector3(0.25, 0.25, 4.2828)

[node name="ManualAeroSurface3D" type="AeroInfluencer3D" parent="."]
transform = Transform3D(0.996195, 0.0871557, 0, -0.0871558, 0.996194, 0, 0, 0, 1, -1.90776, 0, -0.813242)
script = ExtResource("2_ygpq6")
manual_config = SubResource("Resource_blosn")
wing_config = SubResource("Resource_m2vdb")
metadata/_custom_type_script = "uid://d1725od371u4a"

[node name="CSGBox3D" type="CSGBox3D" parent="ManualAeroSurface3D"]
transform = Transform3D(1, 0, 0, -1.83187e-15, 1, 0, 0, 0, 1, 0, 0, 0.262994)
size = Vector3(3.58374, 0.0636896, 1.10385)

[node name="ManualAeroSurface3D2" type="AeroInfluencer3D" parent="."]
transform = Transform3D(0.996195, -0.0871557, 0, 0.0871558, 0.996194, 0, 0, 0, 1, 1.9078, 0, -0.8132)
script = ExtResource("2_ygpq6")
manual_config = SubResource("Resource_blosn")
wing_config = SubResource("Resource_m2vdb")
metadata/_custom_type_script = "uid://d1725od371u4a"

[node name="CSGBox3D" type="CSGBox3D" parent="ManualAeroSurface3D2"]
transform = Transform3D(1, 0, 0, -1.83187e-15, 1, 0, 0, 0, 1, 0, 0, 0.262994)
size = Vector3(3.58374, 0.0636896, 1.10385)

[node name="ManualAeroSurface3D3" type="AeroInfluencer3D" parent="."]
transform = Transform3D(6.12303e-17, -1, 0, 1, 6.12303e-17, 0, 0, 0, 1, 0, 0, 2.89762)
script = ExtResource("2_ygpq6")
manual_config = SubResource("Resource_blosn")
wing_config = SubResource("Resource_gk5sg")
metadata/_custom_type_script = "uid://d1725od371u4a"

[node name="CSGBox3D" type="CSGBox3D" parent="ManualAeroSurface3D3"]
transform = Transform3D(1, 0, 0, -1.83187e-15, 1, 0, 0, 0, 1, 0, 0, 0.262994)
size = Vector3(3.58374, 0.0636896, 1.10385)

[node name="ManualAeroSurface3D4" type="AeroInfluencer3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 2.89762)
script = ExtResource("2_ygpq6")
manual_config = SubResource("Resource_blosn")
wing_config = SubResource("Resource_gk5sg")
metadata/_custom_type_script = "uid://d1725od371u4a"

[node name="CSGBox3D" type="CSGBox3D" parent="ManualAeroSurface3D4"]
transform = Transform3D(1, 0, 0, -1.83187e-15, 1, 0, 0, 0, 1, 0, 0, 0.262994)
size = Vector3(3.58374, 0.0636896, 1.10385)
